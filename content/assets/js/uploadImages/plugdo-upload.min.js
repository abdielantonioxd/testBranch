function uploadImagesServer(config){if("upload-image"!=config.Module)throw"this Module is not Fount in the configuration";var btn=config.save[0];hidebtnSave(btn);var self=this,configFile="",ObjectMultipleImages=[];function hidebtnSave(btn){for(const btnP of Object.keys(btn))null!=document.getElementById(btn[btnP])&&(document.getElementById(btn[btnP]).style.display="none")}function showbtnSave(btn){for(const i of Object.keys(btn))null!=document.getElementById(btn[i])&&(document.getElementById(btn[i]).style.display="block")}self.registerDataForm=function(configImages){if(showbtnSave(btn),configFile=configImages[1],config=configImages[0],0==configImages.length)throw"Object 'config' is Empty";function func_validateSize(){0!=config.validateSize&&ValidateSizeImages()}function func_validateFormats(){0!=config.validateFormats&&validateFormatImages()}function func_validateSpace(){if(null!=config.validateSpace&&0!=config.validateSpace){if(1==config.previewMultiple)throw new TypeError("la propiedad de validacion de espacios  no deve no esta disponible para Multiples imagenes ");if(0==configFile.data.files.length)throw new TypeError("The images could not be processed");var nameImage,err;-1===configFile.data.files[0].name.indexOf(" ")||msgErr({title:"Error",text:"El nombre de la imagen no deve contener espacios",icon:"error"})}}function func_validatePreviewImages(){0!=config.preview&&renderImagesOnlyOne()}function ValidateSizeImages(){var errorObj;configFile.data.files[0].size>config.size&&msgErr({title:"Error",text:"Imagen excede el limite autorizado",icon:"error"})}function validateFormatImages(){if(""==config.idInput)throw"The id of input in not defined in the configuration";var fileInput,filePath=document.getElementById(config.idInput).value,allowedExtensions,errorObj;/(.jpg|.jpeg|.png)$/i.exec(filePath)||msgErr({title:"Error",text:"Solo se aceptan formatos .jpeg/.jpg/.png",icon:"error"})}function renderImagesOnlyOne(){if(void 0===config.contentImput)throw new TypeError("id of input is undefined in configuration");if(void 0===config.viewImages)throw new TypeError("Container of view images is undefined in the  configuration");if(void 0===config.contentUpload)throw new TypeError("Container of Upload images is undefined in the  configuration");if(void 0===config.titleImages)throw new TypeError("Container of title images is undefined in the configuration");if(!(config.contentImput&&config.viewImages&&config.contentUpload&&""!=config.titleImages))throw new TypeError("the image cannot be displayed because some properties are not defined");function renderI(){var reader=new FileReader;if(reader.onload=function(e){document.getElementById(config.contentImput).style.display="none",document.getElementById(config.viewImages).src=`${e.target.result}`,document.getElementById(config.contentUpload).style.display="block",0!=configFile.data.files.length&&(document.getElementById(config.titleImages).innerHTML=configFile.data.files[0].name)},!(configFile.data.files.length>0))throw new TypeError("the image could not be rendered");reader.readAsDataURL(configFile.data.files[0])}renderI()}function msgErr(msn){if(!0===config.useSweetAlert)swal({title:msn.title,text:msn.text,icon:msn.icon}),responseImages();else if(!0===config.useAlertify)alertify.set("notifier","position","top-right"),"success"!=msn.icon?alertify.error(msn.text):alertify.success(msn.text),responseImages();else{if(""==config.templateErr||""==config.idErr)throw"The propertys of 'error'   is empty in the configuration";document.getElementById(config.idErr).innerHTML=msn.text,setTimeout(()=>{document.getElementById(config.idErr).innerHTML=""},2e3),responseImages()}}function responseImages(){for(let index=0;index<document.forms.length;index++)null!=document.forms[index].id&&document.forms[index].id===configFile.data.form.id&&(document.forms[index].reset(),0!=config.preview&&(document.getElementById(config.contentImput).style.display="block",document.getElementById(config.contentUpload).style.display="none"))}func_validateSize(),func_validateFormats(),func_validateSpace(),func_validatePreviewImages(),self.chooseAnother=function(configDelete){configFile=configDelete[1],config=configDelete[0];for(let index=0;index<document.forms.length;index++)null!=document.forms[index].id&&document.forms[index].id===configFile.data.form.id&&(document.forms[index].reset(),configDelete.splice(1,1),hidebtnSave(btn),document.getElementById(config.contentImput).style.display="block",document.getElementById(config.contentUpload).style.display="none")},self.MultipleImages=function(idResult){if(0!=idResult.active){if(ObjectMultipleImages.push(idResult),!(window.File&&window.FileList&&window.FileReader))throw new TypeError("Your browser does not support File API");for(var files=event.target.files,output=document.getElementById(idResult.result),i=0;i<files.length;i++){var file=files[i];if(file.type.match("image")){var picReader=new FileReader;picReader.addEventListener("load",function(event){var picFile=event.target,div=document.createElement("div");div.className=`${idResult.class}`,div.innerHTML=`<img id="images-${i}" class="img-thumbnail" src="${picFile.result}"  title="${picFile.name}" />`,output.insertBefore(div,null)}),picReader.readAsDataURL(file)}}}},self.saveImages=function(link){var URL=link.url,formData=new FormData(document.getElementById(config.nameForm)),Errobject;(console.log(formData),formData.append("dato","valor"),""!=URL)?saveImagesServer(URL,formData):msgErr({title:"Error",text:"Por favor coloque una Url de  Api a cual se enviaran los datos.",icon:"error"});function saveImagesServer(URL,formData){var request=new XMLHttpRequest,successObj,errorObject;(request.responseType="json",request.open("post",URL),request.send(formData),1===request.readyState)?msgErr({title:"Excelente",text:"Imagen Guardada correctamente",icon:"success"}):msgErr({title:"Error",text:"Ocurrio un error vuelva a Ingresar la Imagen",icon:"error"})}}}}function deleteFileInServer(config){var self=this,component=config.Module;if(null==config.Module)throw new TypeError("the  property  Module is  not  defined");if(null==config.msgErrActive)throw new TypeError("the  property  msgErrActive is  not  defined");if(null==config.useAlertify)throw new TypeError("The property useAlertify in not defined");if(null==config.useSweetAlert)throw new TypeError("The property SweetAlert in not defined");if(null==config.useConsole)throw new TypeError("The property useConsole in not defined");if("delete-image"!=component)throw new TypeError("Module is not register in the configuration");this.deleteImages=function(params){console.log(params);var dataDelete=params;if(""==dataDelete.name||null==dataDelete.name)throw"Name File is undefined";function del(){var request=new XMLHttpRequest,successObj,errorObj;(request.open("POST",dataDelete.Url,!0),request.setRequestHeader("Content-Type","application/json"),request.send(JSON.stringify({name:dataDelete.name})),1===request.readyState)?msgErr({title:"Excelente",text:"Archivo eliminado correctamente",icon:"success"}):msgErr({title:"error",text:"El rchivo no fue  eliminado ",icon:"error"})}function msgErr(msn){!0===config.useSweetAlert?swal({title:msn.title,text:msn.text,icon:msn.icon}):!0===config.useAlertify?(alertify.set("notifier","position","top-right"),"success"!=msn.icon?alertify.error(msn.text):alertify.success(msn.text)):!0===config.useConsole&&console.log(msn)}del()}}